{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observe{\r\n  constructor(data){\r\n    this.walk(data)\r\n  }\r\n\r\n  walk(data){\r\n    Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\r\n  }\r\n}\r\n\r\n\r\nexport function defineReactive(target, key, value) {\r\n  observe(value)\r\n  Object.defineProperty(target, key, {\r\n    get(){\r\n      console.log('劫持用户的取值操作，get');\r\n      return value\r\n    },\r\n    set(newValue){\r\n      if (newValue !== value) {\r\n      console.log('劫持用户的设置操作，set');\r\n      observe(newValue)\r\n        value = newValue\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function observe(data) {\r\n  if (typeof data !== 'object' || data === null) {\r\n    return\r\n  }\r\n  return new Observe(data)\r\n}","import {observe} from './observe'\r\n\r\nexport  function initState(vm) {\r\n  const opts = vm.$options\r\n  // if (opts.props) {\r\n  //   initProps(opts.props)\r\n  // }\r\n\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data\r\n  data = typeof data === 'function'? data.call(vm) : data\r\n  vm._data = data\r\n  proxy(vm, '_data')\r\n  observe(data)\r\n} \r\n\r\n\r\nfunction proxy(vm, target){\r\n  for(let key in vm[target]){\r\n      Object.defineProperty(vm, key, {\r\n          get(){\r\n              return vm[target][key]\r\n          },\r\n          set(newValue){\r\n              vm[target][key] = newValue\r\n          }\r\n      })\r\n  }\r\n}","import {initState} from \"./state\"\r\n\r\n function initMixin(Vue){\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this\r\n    vm.$options = options // 将用户的选项存在实例上\r\n    initState(vm)\r\n  }\r\n}\r\n\r\nexport default initMixin","import initMixin from \"./init\"\r\n\r\n\r\nfunction Vue(options) {\r\n  this._init(options)\r\n}\r\n\r\n\r\ninitMixin(Vue)\r\n\r\nexport default Vue"],"names":["Observe","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","console","log","set","newValue","initState","vm","opts","$options","initData","call","_data","proxy","initMixin","Vue","prototype","_init","options"],"mappings":"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"}